<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Section 3.7: Additional Counting Rules</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        :root {
            --primary: #0466c8;
            --primary-light: #e0f2fe;
            --accent: #0353a4;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --success: #38b000;
            --warning: #ffbe0b;
            --info: #4361ee;
            --danger: #dc3545;
            --gradient-start: #667eea;
            --gradient-end: #764ba2;
            --counting-colors: {
                --multiplication: #ff6b6b;
                --permutation: #4ecdc4;
                --combination: #45b7d1;
                --partition: #96ceb4;
            }
        }
        
        html {
            box-sizing: border-box;
        }
        
        *, *::before, *::after {
            box-sizing: inherit;
        }
        
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            width: 100%;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Open Sans', Arial, sans-serif;
            font-weight: 700;
            line-height: 1.2;
            margin-top: 0;
        }
        
        h1 {
            font-size: 2.25rem;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 2rem;
            padding: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            font-size: 1.875rem;
        }
        
        h3 {
            font-size: 1.5rem;
        }
        
        h4 {
            font-size: 1.25rem;
        }
        
        h5 {
            font-size: 1.125rem;
        }
        
        h6 {
            font-size: 1rem;
        }
        
        /* Responsive media elements */
        img, video, iframe {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .step-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .step-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }
        
        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
        }
        
        .step-card h2 {
            font-size: 1.875rem;
            color: var(--dark);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 10px;
        }
        
        p {
            max-width: 100%;
            margin-bottom: 1rem;
            word-wrap: break-word;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--accent);
            text-decoration: underline;
        }
        
        code, pre {
            font-family: 'Roboto Mono', monospace;
            background: #f4f4f4;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        pre {
            padding: 1rem;
            overflow-x: auto;
            border-radius: 8px;
        }
        
        .katex {
            font-size: 1.1em;
        }
        
        .action-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .sub-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--info);
        }
        
        .sub-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .sub-section h4 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .step-sequence {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .step-item {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.2s ease;
        }
        
        .step-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .step-number {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(4, 102, 200, 0.3);
        }
        
        .step-content {
            flex: 1;
            font-size: 1rem;
        }
        
        .highlight-confirmed {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .highlight-insight {
            background: linear-gradient(135deg, #cce7ff, #b3d9ff);
            border: 2px solid var(--info);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-warning {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid var(--warning);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-danger {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border: 2px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .formula-display {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .counting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .counting-rule {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
            border-left: 5px solid;
        }
        
        .counting-rule:hover {
            transform: scale(1.02);
        }
        
        .counting-rule.multiplication {
            border-left-color: #ff6b6b;
        }
        
        .counting-rule.permutation {
            border-left-color: #4ecdc4;
        }
        
        .counting-rule.combination {
            border-left-color: #45b7d1;
        }
        
        .counting-rule.partition {
            border-left-color: #96ceb4;
        }
        
        .counting-rule h4 {
            color: var(--dark);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .interactive-calculator {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            text-align: center;
        }
        
        .calculator-input {
            background: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            margin: 5px;
            font-size: 1.1rem;
            color: #333;
            text-align: center;
            width: 80px;
        }
        
        .calculator-button {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            margin: 10px 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(4, 102, 200, 0.3);
        }
        
        .calculator-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(4, 102, 200, 0.4);
        }
        
        .result-display {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 1.3rem;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .tree-diagram {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .example-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--warning);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .example-box h4 {
            color: var(--warning);
            margin-bottom: 15px;
        }
        
        /* Mobile-first responsive design */
        @media (max-width: 480px) {
            body {
                font-size: 0.9rem;
                padding: 12px;
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            h2 {
                font-size: 1.4rem;
            }
            
            h3 {
                font-size: 1.2rem;
            }
            
            .step-card {
                padding: 15px;
            }
            
            .counting-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .calculator-input {
                width: 60px;
                font-size: 1rem;
                padding: 8px;
            }
            
            .calculator-button {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 768px) and (min-width: 481px) {
            h1 {
                font-size: 1.875rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.25rem;
            }
            
            .step-card {
                padding: 18px;
            }
            
            .counting-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            .counting-rule:hover,
            .calculator-button:hover {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <h1>Section 3.7: Additional Counting Rules</h1>
    
    <div class="step-card">
        <h2>🧮 The Power of Counting Rules</h2>
        
        <div class="action-box">
            <p><strong>Big Picture:</strong> When experiments have enormous sample spaces, we need systematic ways to count outcomes without listing them all!</p>
        </div>
        
        <div class="sub-section">
            <h3>Why Counting Rules Matter</h3>
            <p>Many real-world probability problems involve situations with millions or billions of possible outcomes. Counting rules help us:</p>
            <ul>
                <li><strong>Calculate probabilities</strong> when direct enumeration is impossible</li>
                <li><strong>Design experiments</strong> and understand their complexity</li>
                <li><strong>Solve practical problems</strong> in scheduling, logistics, and decision-making</li>
                <li><strong>Analyze combinations</strong> in everything from card games to password security</li>
            </ul>
        </div>
        
        <div class="highlight-insight">
            <h4>💡 Core Strategy</h4>
            <p>Instead of counting individual outcomes, we count <strong>patterns</strong> and <strong>structures</strong>. Each counting rule captures a different type of selection or arrangement problem.</p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🔢 The Four Essential Counting Rules</h2>
        
        <div class="counting-grid">
            <div class="counting-rule multiplication">
                <h4>🎯 Multiplication Rule</h4>
                <div class="formula-display">
                    $$n_1 \times n_2 \times \cdots \times n_k$$
                </div>
                <p><strong>Use when:</strong> You have k sequential choices, with n₁ options for first choice, n₂ options for second choice, etc.</p>
                <p><strong>Example:</strong> 4 airlines × 3 routes = 12 shipping options</p>
            </div>
            
            <div class="counting-rule permutation">
                <h4>🔄 Permutations Rule</h4>
                <div class="formula-display">
                    $$P(N,n) = \frac{N!}{(N-n)!}$$
                </div>
                <p><strong>Use when:</strong> Selecting and arranging n objects from N total objects, where <em>order matters</em>.</p>
                <p><strong>Example:</strong> Assigning 5 soldiers to 5 different missions</p>
            </div>
            
            <div class="counting-rule combination">
                <h4>🎲 Combinations Rule</h4>
                <div class="formula-display">
                    $$C(N,n) = \binom{N}{n} = \frac{N!}{n!(N-n)!}$$
                </div>
                <p><strong>Use when:</strong> Selecting n objects from N total objects, where <em>order doesn't matter</em>.</p>
                <p><strong>Example:</strong> Choosing 5 soldiers for a single mission (no rank assignment)</p>
            </div>
            
            <div class="counting-rule partition">
                <h4>📦 Partitions Rule</h4>
                <div class="formula-display">
                    $$\frac{N!}{n_1! \times n_2! \times \cdots \times n_k!}$$
                </div>
                <p><strong>Use when:</strong> Dividing N objects into k groups of specified sizes n₁, n₂, ..., nₖ.</p>
                <p><strong>Example:</strong> Assigning 12 workers to 3 different job sites</p>
            </div>
        </div>
        
        <div class="highlight-warning">
            <h4>⚠️ Decision Key</h4>
            <p><strong>Order matters?</strong> → Permutations or Multiplication<br/>
            <strong>Order doesn't matter?</strong> → Combinations or Partitions<br/>
            <strong>Multiple groups?</strong> → Partitions<br/>
            <strong>Sequential choices?</strong> → Multiplication</p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>✈️ Interactive Example: Airline Route Planning</h2>
        
        <div class="sub-section">
            <h3>The Scenario</h3>
            <p>A shipping company can use 4 different airlines, and each airline offers 3 different routes to the destination.</p>
            <p><strong>Question:</strong> How many distinct shipping options exist?</p>
        </div>
        
        <div class="tree-diagram">
            <h4>Tree Diagram Visualization</h4>
            <svg width="100%" height="300" viewBox="0 0 800 300" style="border: 1px solid #ddd; border-radius: 8px;">
                <!-- Root -->
                <circle cx="50" cy="150" r="8" fill="#ff6b6b"/>
                <text x="50" y="135" text-anchor="middle" font-size="12" font-weight="bold">Start</text>
                
                <!-- Airlines (Stage 1) -->
                <circle cx="200" cy="80" r="6" fill="#ff6b6b"/>
                <circle cx="200" cy="120" r="6" fill="#ff6b6b"/>
                <circle cx="200" cy="180" r="6" fill="#ff6b6b"/>
                <circle cx="200" cy="220" r="6" fill="#ff6b6b"/>
                
                <text x="220" y="85" font-size="11" fill="#333">Airline 1</text>
                <text x="220" y="125" font-size="11" fill="#333">Airline 2</text>
                <text x="220" y="185" font-size="11" fill="#333">Airline 3</text>
                <text x="220" y="225" font-size="11" fill="#333">Airline 4</text>
                
                <!-- Routes (Stage 2) - simplified to show pattern -->
                <circle cx="400" cy="60" r="4" fill="#4ecdc4"/>
                <circle cx="400" cy="80" r="4" fill="#4ecdc4"/>
                <circle cx="400" cy="100" r="4" fill="#4ecdc4"/>
                
                <circle cx="400" cy="140" r="4" fill="#4ecdc4"/>
                <circle cx="400" cy="160" r="4" fill="#4ecdc4"/>
                <circle cx="400" cy="180" r="4" fill="#4ecdc4"/>
                
                <text x="420" y="65" font-size="10" fill="#333">Route 1</text>
                <text x="420" y="85" font-size="10" fill="#333">Route 2</text>
                <text x="420" y="105" font-size="10" fill="#333">Route 3</text>
                
                <text x="420" y="165" font-size="10" fill="#333">3 routes each...</text>
                
                <!-- Lines -->
                <line x1="58" y1="150" x2="192" y2="80" stroke="#333" stroke-width="1"/>
                <line x1="58" y1="150" x2="192" y2="120" stroke="#333" stroke-width="1"/>
                <line x1="58" y1="150" x2="192" y2="180" stroke="#333" stroke-width="1"/>
                <line x1="58" y1="150" x2="192" y2="220" stroke="#333" stroke-width="1"/>
                
                <line x1="208" y1="80" x2="392" y2="60" stroke="#333" stroke-width="1"/>
                <line x1="208" y1="80" x2="392" y2="80" stroke="#333" stroke-width="1"/>
                <line x1="208" y1="80" x2="392" y2="100" stroke="#333" stroke-width="1"/>
                
                <line x1="208" y1="120" x2="392" y2="140" stroke="#333" stroke-width="1"/>
                <line x1="208" y1="120" x2="392" y2="160" stroke="#333" stroke-width="1"/>
                <line x1="208" y1="120" x2="392" y2="180" stroke="#333" stroke-width="1"/>
                
                <!-- Result box -->
                <rect x="580" y="130" width="180" height="40" fill="#e8f5e8" stroke="#38b000" stroke-width="2" rx="8"/>
                <text x="670" y="150" text-anchor="middle" font-size="14" font-weight="bold" fill="#38b000">Total: 4 × 3 = 12 options</text>
            </svg>
        </div>
        
        <div class="step-sequence">
            <h3>📝 Solution Using Multiplication Rule</h3>
            
            <div class="step-item">
                <span class="step-number">1</span>
                <div class="step-content">
                    <strong>Identify the stages:</strong><br/>
                    Stage 1: Choose an airline (4 options)<br/>
                    Stage 2: Choose a route (3 options)
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">2</span>
                <div class="step-content">
                    <strong>Apply multiplication rule:</strong><br/>
                    Total options = 4 × 3 = 12 distinct shipping methods
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">3</span>
                <div class="step-content">
                    <strong>Verify with tree diagram:</strong><br/>
                    Each airline branches to 3 routes → 4 × 3 = 12 endpoints ✓
                </div>
            </div>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🧮 Interactive Counting Calculator</h2>
        
        <div class="action-box">
            <h3>🎯 Try It Yourself!</h3>
            <p>Use this calculator to explore different counting scenarios and see the formulas in action.</p>
        </div>
        
        <div class="interactive-calculator">
            <h3>Counting Rules Calculator</h3>
            
            <div style="margin: 20px 0;">
                <h4>Multiplication Rule: n₁ × n₂ × ... × nₖ</h4>
                <p>Number of choices at each stage:</p>
                <input type="number" id="mult1" class="calculator-input" placeholder="n₁" min="1" max="100">
                <span>×</span>
                <input type="number" id="mult2" class="calculator-input" placeholder="n₂" min="1" max="100">
                <span>×</span>
                <input type="number" id="mult3" class="calculator-input" placeholder="n₃" min="0" max="100">
                <br>
                <button class="calculator-button" onclick="calculateMultiplication()">Calculate</button>
                <div id="multResult" class="result-display">Enter values and click Calculate</div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4>Permutations: P(N,n) = N!/(N-n)!</h4>
                <p>Total objects (N): <input type="number" id="permN" class="calculator-input" placeholder="N" min="1" max="20"></p>
                <p>Objects to arrange (n): <input type="number" id="permn" class="calculator-input" placeholder="n" min="1" max="20"></p>
                <button class="calculator-button" onclick="calculatePermutations()">Calculate</button>
                <div id="permResult" class="result-display">Enter values and click Calculate</div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4>Combinations: C(N,n) = N!/(n!(N-n)!)</h4>
                <p>Total objects (N): <input type="number" id="combN" class="calculator-input" placeholder="N" min="1" max="20"></p>
                <p>Objects to select (n): <input type="number" id="combn" class="calculator-input" placeholder="n" min="1" max="20"></p>
                <button class="calculator-button" onclick="calculateCombinations()">Calculate</button>
                <div id="combResult" class="result-display">Enter values and click Calculate</div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4>Partitions: N!/(n₁! × n₂! × n₃!)</h4>
                <p>Total objects (N): <input type="number" id="partN" class="calculator-input" placeholder="N" min="1" max="15"></p>
                <p>Group sizes: 
                    <input type="number" id="part1" class="calculator-input" placeholder="n₁" min="1" max="15">
                    <input type="number" id="part2" class="calculator-input" placeholder="n₂" min="1" max="15">
                    <input type="number" id="part3" class="calculator-input" placeholder="n₃" min="0" max="15">
                </p>
                <button class="calculator-button" onclick="calculatePartitions()">Calculate</button>
                <div id="partResult" class="result-display">Enter values and click Calculate</div>
            </div>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🎖️ Real Examples: Military Mission Assignment</h2>
        
        <div class="example-box">
            <h4>📊 Example 1: Permutations in Action</h4>
            <p><strong>Scenario:</strong> 5 dangerous military missions, each requiring exactly 1 soldier. You have 100 soldiers available.</p>
            <p><strong>Question:</strong> How many ways can you assign soldiers to missions?</p>
            
            <div class="step-sequence">
                <div class="step-item">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <strong>Recognize the pattern:</strong> Order matters (different missions), selecting without replacement
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <strong>Apply permutations formula:</strong><br/>
                        P(100,5) = 100!/(100-5)! = 100!/95! = 100 × 99 × 98 × 97 × 96
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <strong>Calculate:</strong><br/>
                        P(100,5) = 9,034,502,400 different ways!
                    </div>
                </div>
            </div>
        </div>
        
        <div class="example-box">
            <h4>📊 Example 2: Combinations for Team Selection</h4>
            <p><strong>Scenario:</strong> Choose 5 soldiers from the same 100 for a single joint mission (no individual assignments).</p>
            <p><strong>Question:</strong> How many different teams can be formed?</p>
            
            <div class="step-sequence">
                <div class="step-item">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <strong>Key insight:</strong> Order doesn't matter (just team membership)
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <strong>Apply combinations formula:</strong><br/>
                        C(100,5) = 100!/(5! × 95!) = (100 × 99 × 98 × 97 × 96)/(5 × 4 × 3 × 2 × 1)
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <strong>Calculate:</strong><br/>
                        C(100,5) = 75,287,520 different teams
                    </div>
                </div>
            </div>
            
            <div class="highlight-insight">
                <p><strong>Compare:</strong> 9 billion arrangements vs 75 million teams. Order makes a huge difference!</p>
            </div>
        </div>
        
        <div class="example-box">
            <h4>📊 Example 3: Partitions for Job Site Assignment</h4>
            <p><strong>Scenario:</strong> Assign 12 construction workers to 3 job sites: 3 workers to site 1, 4 to site 2, and 5 to site 3.</p>
            
            <div class="step-sequence">
                <div class="step-item">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <strong>Recognize partitioning:</strong> Dividing into specified group sizes
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <strong>Apply partitions formula:</strong><br/>
                        12!/(3! × 4! × 5!) = 479,001,600/(6 × 24 × 120) = 479,001,600/17,280
                    </div>
                </div>
                
                <div class="step-item">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <strong>Result:</strong> 27,720 different ways to assign workers
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🃏 Advanced Application: Card Rankings</h2>
        
        <div class="sub-section">
            <h3>Consumer Testing Scenario</h3>
            <p>A consumer testing service must rank the top 3 brands of laundry detergent from a group of 10 brands.</p>
        </div>
        
        <div class="step-sequence">
            <h3>🏆 Part A: How many possible rankings?</h3>
            
            <div class="step-item">
                <span class="step-number">1</span>
                <div class="step-content">
                    <strong>Identify the structure:</strong> Selecting 3 brands and arranging them in order (1st, 2nd, 3rd)
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">2</span>
                <div class="step-content">
                    <strong>Use permutations:</strong> P(10,3) = 10!/(10-3)! = 10!/7! = 10 × 9 × 8 = 720
                </div>
            </div>
        </div>
        
        <div class="step-sequence">
            <h3>🎲 Part B: Probability for Company Z</h3>
            
            <div class="step-item">
                <span class="step-number">1</span>
                <div class="step-content">
                    <strong>Question:</strong> If rankings are random, what's P(Company Z ranks 1st)?
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">2</span>
                <div class="step-content">
                    <strong>Favorable outcomes:</strong> Company Z in 1st place, arrange other 9 in positions 2-3<br/>
                    Number of ways = 1 × P(9,2) = 1 × 9 × 8 = 72
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">3</span>
                <div class="step-content">
                    <strong>Calculate probability:</strong><br/>
                    P(Company Z ranks 1st) = 72/720 = 1/10 = 0.10
                </div>
            </div>
        </div>
        
        <div class="highlight-confirmed">
            <h3>✅ Result: 10% chance of ranking first</h3>
            <p><em>This makes intuitive sense: 1 company out of 10 has equal chance!</em></p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🎯 Problem-Solving Strategy Guide</h2>
        
        <div class="highlight-insight">
            <h4>🧠 The Decision Tree</h4>
            <ol>
                <li><strong>Sequential choices?</strong> → Use Multiplication Rule</li>
                <li><strong>Selecting and arranging?</strong> → Use Permutations</li>
                <li><strong>Selecting without arranging?</strong> → Use Combinations</li>
                <li><strong>Dividing into groups?</strong> → Use Partitions</li>
            </ol>
        </div>
        
        <div class="sub-section">
            <h3>🔍 Key Questions to Ask</h3>
            <ul>
                <li><strong>Does order matter?</strong> (Permutations vs Combinations)</li>
                <li><strong>Are you making sequential decisions?</strong> (Multiplication Rule)</li>
                <li><strong>Are you dividing into multiple groups?</strong> (Partitions)</li>
                <li><strong>Are selections made with or without replacement?</strong></li>
                <li><strong>Are there restrictions or special conditions?</strong></li>
            </ul>
        </div>
        
        <div class="highlight-warning">
            <h4>⚠️ Common Mistakes</h4>
            <ul>
                <li><strong>Forgetting about order:</strong> Using permutations when combinations are needed</li>
                <li><strong>Double counting:</strong> Not recognizing when arrangements are equivalent</li>
                <li><strong>Wrong formula choice:</strong> Mixing up when to use each rule</li>
                <li><strong>Factorial errors:</strong> Computational mistakes with large numbers</li>
            </ul>
        </div>
    </div>
    
    <div class="step-card">
        <h2>✅ Master These Concepts</h2>
        
        <div class="highlight-confirmed">
            <h3>Essential Knowledge Checklist</h3>
            <div style="text-align: left;">
                <p>✓ <strong>Multiplication Rule:</strong> Sequential choices with independent stages</p>
                <p>✓ <strong>Permutations:</strong> Arrangements where order matters</p>
                <p>✓ <strong>Combinations:</strong> Selections where order doesn't matter</p>
                <p>✓ <strong>Partitions:</strong> Dividing objects into specified groups</p>
                <p>✓ <strong>Problem Recognition:</strong> Choosing the right rule for each scenario</p>
                <p>✓ <strong>Real Applications:</strong> Military, business, research, and security contexts</p>
                <p>✓ <strong>Calculator Skills:</strong> Computing factorials and large numbers efficiently</p>
            </div>
        </div>
        
        <div class="formula-display">
            <h3>Quick Reference Card</h3>
            <p><strong>Multiplication:</strong> n₁ × n₂ × ... × nₖ</p>
            <p><strong>Permutations:</strong> P(N,n) = N!/(N-n)!</p>
            <p><strong>Combinations:</strong> C(N,n) = N!/(n!(N-n)!)</p>
            <p><strong>Partitions:</strong> N!/(n₁! × n₂! × ... × nₖ!)</p>
        </div>
        
        <div class="highlight-insight">
            <h4>🚀 Next Steps</h4>
            <p>You're now equipped with powerful counting techniques! These skills will be essential for Section 3.8 on Bayes' Rule, where we'll apply probability calculations to complex real-world scenarios involving conditional reasoning.</p>
        </div>
    </div>

    <script>
        function factorial(n) {
            if (n <= 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
        
        function calculateMultiplication() {
            const mult1 = parseInt(document.getElementById('mult1').value) || 0;
            const mult2 = parseInt(document.getElementById('mult2').value) || 0;
            const mult3 = parseInt(document.getElementById('mult3').value) || 1;
            
            if (mult1 > 0 && mult2 > 0) {
                let result = mult1 * mult2;
                if (mult3 > 0) {
                    result *= mult3;
                    document.getElementById('multResult').innerHTML = `${mult1} × ${mult2} × ${mult3} = <strong>${result.toLocaleString()}</strong>`;
                } else {
                    document.getElementById('multResult').innerHTML = `${mult1} × ${mult2} = <strong>${result.toLocaleString()}</strong>`;
                }
            } else {
                document.getElementById('multResult').innerHTML = 'Please enter positive values for at least the first two fields';
            }
        }
        
        function calculatePermutations() {
            const N = parseInt(document.getElementById('permN').value);
            const n = parseInt(document.getElementById('permn').value);
            
            if (N > 0 && n > 0 && n <= N && N <= 20) {
                let result = 1;
                for (let i = N; i > N - n; i--) {
                    result *= i;
                }
                document.getElementById('permResult').innerHTML = `P(${N},${n}) = ${N}!/(${N}-${n})! = <strong>${result.toLocaleString()}</strong>`;
            } else {
                document.getElementById('permResult').innerHTML = 'Please enter valid values (N ≥ n > 0, N ≤ 20)';
            }
        }
        
        function calculateCombinations() {
            const N = parseInt(document.getElementById('combN').value);
            const n = parseInt(document.getElementById('combn').value);
            
            if (N > 0 && n > 0 && n <= N && N <= 20) {
                let numerator = 1;
                let denominator = factorial(n);
                
                for (let i = N; i > N - n; i--) {
                    numerator *= i;
                }
                
                const result = numerator / denominator;
                document.getElementById('combResult').innerHTML = `C(${N},${n}) = ${N}!/(${n}!×${N-n}!) = <strong>${result.toLocaleString()}</strong>`;
            } else {
                document.getElementById('combResult').innerHTML = 'Please enter valid values (N ≥ n > 0, N ≤ 20)';
            }
        }
        
        function calculatePartitions() {
            const N = parseInt(document.getElementById('partN').value);
            const n1 = parseInt(document.getElementById('part1').value) || 0;
            const n2 = parseInt(document.getElementById('part2').value) || 0;
            const n3 = parseInt(document.getElementById('part3').value) || 0;
            
            if (N > 0 && n1 > 0 && n2 > 0 && N <= 15) {
                const sum = n1 + n2 + n3;
                if (sum === N) {
                    const numerator = factorial(N);
                    const denominator = factorial(n1) * factorial(n2) * (n3 > 0 ? factorial(n3) : 1);
                    const result = numerator / denominator;
                    
                    if (n3 > 0) {
                        document.getElementById('partResult').innerHTML = `${N}!/(${n1}!×${n2}!×${n3}!) = <strong>${result.toLocaleString()}</strong>`;
                    } else {
                        document.getElementById('partResult').innerHTML = `${N}!/(${n1}!×${n2}!) = <strong>${result.toLocaleString()}</strong>`;
                    }
                } else {
                    document.getElementById('partResult').innerHTML = `Group sizes must sum to ${N}. Current sum: ${sum}`;
                }
            } else {
                document.getElementById('partResult').innerHTML = 'Please enter valid values (N ≤ 15, positive group sizes)';
            }
        }
        
        // Add some example values on page load
        window.addEventListener('load', function() {
            // Airline example
            document.getElementById('mult1').value = 4;
            document.getElementById('mult2').value = 3;
            calculateMultiplication();
        });
    </script>
</body>
</html>
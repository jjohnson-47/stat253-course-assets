<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Section 3.8: Bayes' Rule</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        :root {
            --primary: #0466c8;
            --primary-light: #e0f2fe;
            --accent: #0353a4;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --success: #38b000;
            --warning: #ffbe0b;
            --info: #4361ee;
            --danger: #dc3545;
            --gradient-start: #667eea;
            --gradient-end: #764ba2;
            --bayes-highlight: #fffacc;
            --tree-node: #000;
            --tree-edge: #000;
        }
        
        html {
            box-sizing: border-box;
        }
        
        *, *::before, *::after {
            box-sizing: inherit;
        }
        
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            width: 100%;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Open Sans', Arial, sans-serif;
            font-weight: 700;
            line-height: 1.2;
            margin-top: 0;
        }
        
        h1 {
            font-size: 2.25rem;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 2rem;
            padding: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            font-size: 1.875rem;
        }
        
        h3 {
            font-size: 1.5rem;
        }
        
        h4 {
            font-size: 1.25rem;
        }
        
        h5 {
            font-size: 1.125rem;
        }
        
        h6 {
            font-size: 1rem;
        }
        
        /* Responsive media elements */
        img, video, iframe {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .step-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .step-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }
        
        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
        }
        
        .step-card h2 {
            font-size: 1.875rem;
            color: var(--dark);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 10px;
        }
        
        p {
            max-width: 100%;
            margin-bottom: 1rem;
            word-wrap: break-word;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--accent);
            text-decoration: underline;
        }
        
        code, pre {
            font-family: 'Roboto Mono', monospace;
            background: #f4f4f4;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        pre {
            padding: 1rem;
            overflow-x: auto;
            border-radius: 8px;
        }
        
        .katex {
            font-size: 1.1em;
        }
        
        .action-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .sub-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--info);
        }
        
        .sub-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .sub-section h4 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .step-sequence {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .step-item {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.2s ease;
        }
        
        .step-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .step-number {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(4, 102, 200, 0.3);
        }
        
        .step-content {
            flex: 1;
            font-size: 1rem;
        }
        
        .highlight-confirmed {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .highlight-insight {
            background: linear-gradient(135deg, #cce7ff, #b3d9ff);
            border: 2px solid var(--info);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-warning {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid var(--warning);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-danger {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border: 2px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .formula-display {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .interactive-tree {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .tree-container {
            position: relative;
            width: 100%;
            min-width: 800px;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fdfdfd;
        }
        
        .tree-node {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--tree-node);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .tree-label {
            position: absolute;
            font-size: 12px;
            font-weight: bold;
            color: #333;
            transform: translate(-50%, -50%);
            z-index: 20;
            pointer-events: none;
        }
        
        .tree-edge {
            position: absolute;
            height: 2px;
            background: var(--tree-edge);
            transform-origin: left center;
            z-index: 5;
        }
        
        .probability-table {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .prob-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        
        .prob-table th,
        .prob-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        
        .prob-table th {
            background: linear-gradient(135deg, var(--dark), #34495e);
            color: white;
            font-weight: bold;
        }
        
        .prob-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .highlight-rainy {
            background: var(--bayes-highlight) !important;
            font-weight: bold;
        }
        
        .bayes-calculator {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            text-align: center;
        }
        
        .calc-input-group {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .calc-input {
            background: white;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            margin: 5px;
            font-size: 1rem;
            color: #333;
            width: 100px;
        }
        
        .calc-button {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            margin: 10px 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(4, 102, 200, 0.3);
        }
        
        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(4, 102, 200, 0.4);
        }
        
        .calc-result {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: transform 0.2s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .comparison-item.medical {
            border-left: 5px solid var(--info);
            background: linear-gradient(135deg, #f0f8ff, #e6f3ff);
        }
        
        .comparison-item.security {
            border-left: 5px solid var(--danger);
            background: linear-gradient(135deg, #fff0f0, #ffe6e6);
        }
        
        /* Mobile-first responsive design */
        @media (max-width: 480px) {
            body {
                font-size: 0.9rem;
                padding: 12px;
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            h2 {
                font-size: 1.4rem;
            }
            
            h3 {
                font-size: 1.2rem;
            }
            
            .step-card {
                padding: 15px;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .tree-container {
                min-width: 600px;
                height: 400px;
            }
            
            .prob-table {
                font-size: 0.8rem;
            }
            
            .calc-input {
                width: 80px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 768px) and (min-width: 481px) {
            h1 {
                font-size: 1.875rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.25rem;
            }
            
            .step-card {
                padding: 18px;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .tree-container {
                min-width: 700px;
                height: 450px;
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            .comparison-item:hover,
            .calc-button:hover {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <h1>Section 3.8: Bayes' Rule</h1>
    
    <div class="step-card">
        <h2>📹 Video: Bayes' Theorem by 3Blue1Brown</h2>
        
        <div class="action-box">
            <p><strong>Start Here:</strong> Watch this exceptional explanation of Bayes' theorem with brilliant visual insights!</p>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <div style="position: relative; width: 100%; height: 0; padding-bottom: 56.25%; max-width: 800px; margin: 0 auto;">
                <iframe src="https://www.youtube.com/embed/HZGCoVF3YvM?si=-TzTXXO4LHNpT20N" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);"></iframe>
            </div>
        </div>
        
        <div class="sub-section">
            <h3>Why This Video is Perfect for Learning Bayes' Rule</h3>
            <p>Grant Sanderson (3Blue1Brown) masterfully explains Bayes' theorem through:</p>
            <ul>
                <li><strong>Visual intuition:</strong> Geometric representations that make abstract concepts concrete</li>
                <li><strong>Medical testing examples:</strong> Real-world scenarios you can relate to immediately</li>
                <li><strong>Formula development:</strong> Shows how the formula emerges naturally from conditional probability</li>
                <li><strong>Common misconceptions:</strong> Addresses why our intuition often fails us</li>
                <li><strong>Multiple perspectives:</strong> Different ways to think about the same mathematical relationship</li>
            </ul>
        </div>
        
        <div class="highlight-insight">
            <h4>💡 Key Takeaway from the Video</h4>
            <p><strong>Bayes' rule is fundamentally about reversing conditional probabilities.</strong> It lets us flip from P(evidence | hypothesis) to P(hypothesis | evidence) – which is usually what we actually want to know!</p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🧠 Understanding Bayes' Rule</h2>
        
        <div class="sub-section">
            <h3>The Revolutionary Insight</h3>
            <p>In the mid-1700s, English philosopher Thomas Bayes developed a method for <strong>reversing conditional probabilities</strong>. This simple idea revolutionized statistics, machine learning, and scientific inference.</p>
            
            <p><strong>The Problem:</strong> We often know P(evidence | hypothesis) but want P(hypothesis | evidence)</p>
            <p><strong>Bayes' Solution:</strong> Use prior probabilities and observed evidence to calculate what we really want to know</p>
        </div>
        
        <div class="formula-display">
            <h3>Bayes' Rule Formula</h3>
            <p>For mutually exclusive and exhaustive events $A_1, A_2, \ldots, A_k$ and observed event $B$:</p>
            $$P(A_i|B) = \frac{P(A_i \cap B)}{P(B)} = \frac{P(A_i)P(B|A_i)}{P(A_1)P(B|A_1) + P(A_2)P(B|A_2) + \cdots + P(A_k)P(B|A_k)}$$
            <p><em>This connects what we want (posterior) to what we know (prior and likelihood)</em></p>
        </div>
        
        <div class="highlight-insight">
            <h4>🎯 Intuitive Understanding</h4>
            <p><strong>Numerator:</strong> How likely is this specific scenario?<br/>
            <strong>Denominator:</strong> How likely is the evidence overall?<br/>
            <strong>Result:</strong> What fraction of evidence cases support this hypothesis?</p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🛡️ Real-World Example: Intruder Detection System</h2>
        
        <div class="sub-section">
            <h3>The Security Scenario</h3>
            <p>An unmanned monitoring system at a weapons facility uses high-tech equipment to detect intruders. Based on controlled tests:</p>
            <ul>
                <li><strong>Detection accuracy:</strong> P(Detect) = 0.90</li>
                <li><strong>Weather conditions when intruder detected:</strong>
                    <ul>
                        <li>Clear: 75%, Cloudy: 20%, Rainy: 5%</li>
                    </ul>
                </li>
                <li><strong>Weather conditions when intruder missed:</strong>
                    <ul>
                        <li>Clear: 60%, Cloudy: 30%, Rainy: 10%</li>
                    </ul>
                </li>
            </ul>
            <p><strong>Critical Question:</strong> Given rainy weather, what's the probability of detecting an intruder?</p>
        </div>
        
        <div class="interactive-tree">
            <h3>📊 Interactive Probability Tree Diagram</h3>
            <p><em>This diagram follows the exact specifications from your textbook, with highlighted rainy weather outcomes.</em></p>
            
            <div class="tree-container">
                <!-- Vertical guide lines -->
                <div style="position: absolute; left: 200px; top: 0; bottom: 0; width: 1px; background: #ccc; opacity: 0.5;"></div>
                <div style="position: absolute; left: 400px; top: 0; bottom: 0; width: 1px; background: #ccc; opacity: 0.5;"></div>
                
                <!-- Root node -->
                <div class="tree-node" style="left: 50px; top: 200px;"></div>
                
                <!-- Stage 1 nodes (Intruder detection) -->
                <div class="tree-node" style="left: 200px; top: 150px;"></div>
                <div class="tree-node" style="left: 200px; top: 250px;"></div>
                
                <!-- Stage 1 labels -->
                <div class="tree-label" style="left: 125px; top: 125px; font-style: italic;">Detect: D (0.9)</div>
                <div class="tree-label" style="left: 125px; top: 275px; font-style: italic;">Fail: D<sup>c</sup> (0.1)</div>
                
                <!-- Stage 2 nodes (Weather) -->
                <div class="tree-node" style="left: 400px; top: 90px;"></div>
                <div class="tree-node" style="left: 400px; top: 130px;"></div>
                <div class="tree-node" style="left: 400px; top: 170px;"></div>
                <div class="tree-node" style="left: 400px; top: 210px;"></div>
                <div class="tree-node" style="left: 400px; top: 250px;"></div>
                <div class="tree-node" style="left: 400px; top: 290px;"></div>
                
                <!-- Stage 2 labels -->
                <div class="tree-label" style="left: 300px; top: 110px; font-style: italic;">Clear (0.75)</div>
                <div class="tree-label" style="left: 300px; top: 140px; font-style: italic;">Cloudy (0.20)</div>
                <div class="tree-label" style="left: 300px; top: 180px; font-style: italic; color: #ff6b6b; font-weight: bold;">Rainy (0.05)</div>
                <div class="tree-label" style="left: 300px; top: 220px; font-style: italic;">Clear (0.60)</div>
                <div class="tree-label" style="left: 300px; top: 260px; font-style: italic;">Cloudy (0.30)</div>
                <div class="tree-label" style="left: 300px; top: 300px; font-style: italic; color: #ff6b6b; font-weight: bold;">Rainy (0.10)</div>
                
                <!-- Headings -->
                <div class="tree-label" style="left: 50px; top: 40px; font-weight: bold; font-size: 14px;">Intruder</div>
                <div class="tree-label" style="left: 275px; top: 40px; font-weight: bold; font-size: 14px;">Weather Condition</div>
                <div class="tree-label" style="left: 550px; top: 40px; font-weight: bold; font-size: 14px;">Outcome</div>
                <div class="tree-label" style="left: 750px; top: 40px; font-weight: bold; font-size: 14px;">Probability</div>
                
                <!-- Highlight rectangles for rainy outcomes -->
                <div style="position: absolute; left: 510px; top: 160px; width: 340px; height: 30px; background: var(--bayes-highlight); opacity: 0.6; border-radius: 4px;"></div>
                <div style="position: absolute; left: 510px; top: 280px; width: 340px; height: 30px; background: var(--bayes-highlight); opacity: 0.6; border-radius: 4px;"></div>
                
                <!-- Outcome and probability text -->
                <div class="tree-label" style="left: 550px; top: 100px; font-size: 11px;">D ∩ Clear</div>
                <div class="tree-label" style="left: 750px; top: 100px; font-size: 11px;">(.9)(.75)=.675</div>
                
                <div class="tree-label" style="left: 550px; top: 140px; font-size: 11px;">D ∩ Cloudy</div>
                <div class="tree-label" style="left: 750px; top: 140px; font-size: 11px;">(.9)(.20)=.180</div>
                
                <div class="tree-label" style="left: 550px; top: 175px; font-size: 11px; font-weight: bold;">D ∩ Rainy</div>
                <div class="tree-label" style="left: 750px; top: 175px; font-size: 11px; font-weight: bold; color: #ff6b6b;">(.9)(.05)=.045</div>
                
                <div class="tree-label" style="left: 550px; top: 220px; font-size: 11px;">D<sup>c</sup> ∩ Clear</div>
                <div class="tree-label" style="left: 750px; top: 220px; font-size: 11px;">(.1)(.60)=.06</div>
                
                <div class="tree-label" style="left: 550px; top: 260px; font-size: 11px;">D<sup>c</sup> ∩ Cloudy</div>
                <div class="tree-label" style="left: 750px; top: 260px; font-size: 11px;">(.1)(.30)=.03</div>
                
                <div class="tree-label" style="left: 550px; top: 295px; font-size: 11px; font-weight: bold;">D<sup>c</sup> ∩ Rainy</div>
                <div class="tree-label" style="left: 750px; top: 295px; font-size: 11px; font-weight: bold; color: #ff6b6b;">(.1)(.10)=.01</div>
            </div>
        </div>
        
        <div class="step-sequence">
            <h3>🔍 Solving with Bayes' Rule</h3>
            
            <div class="step-item">
                <span class="step-number">1</span>
                <div class="step-content">
                    <strong>Define events:</strong><br/>
                    D = "Intruder detected", D<sup>c</sup> = "Intruder not detected"<br/>
                    <strong>Goal:</strong> Find P(D | Rainy)
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">2</span>
                <div class="step-content">
                    <strong>Identify intersection probabilities:</strong><br/>
                    P(D ∩ Rainy) = P(D) × P(Rainy | D) = 0.90 × 0.05 = 0.045<br/>
                    P(D<sup>c</sup> ∩ Rainy) = P(D<sup>c</sup>) × P(Rainy | D<sup>c</sup>) = 0.10 × 0.10 = 0.01
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">3</span>
                <div class="step-content">
                    <strong>Calculate total probability of rainy weather:</strong><br/>
                    P(Rainy) = P(D ∩ Rainy) + P(D<sup>c</sup> ∩ Rainy) = 0.045 + 0.01 = 0.055
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">4</span>
                <div class="step-content">
                    <strong>Apply Bayes' rule:</strong><br/>
                    P(D | Rainy) = P(D ∩ Rainy) / P(Rainy) = 0.045 / 0.055 = 0.818
                </div>
            </div>
        </div>
        
        <div class="highlight-confirmed">
            <h3>✅ Result: 81.8% detection probability in rainy weather</h3>
            <p><em>Even in adverse weather, the system maintains good detection performance!</em></p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🦽 Medical Robotics Example: Wheelchair Controller</h2>
        
        <div class="sub-section">
            <h3>Assistive Technology Scenario</h3>
            <p>Researchers developed an "intelligent" robotic controller for electric wheelchairs to help disabled users navigate more easily. The system interprets user intentions based on joystick movements.</p>
            
            <p><strong>Possible destinations from current location:</strong></p>
            <ul>
                <li><strong>D (Door):</strong> Turn left and navigate through door - P(D) = 0.5</li>
                <li><strong>S (Straight):</strong> Proceed straight across room - P(S) = 0.2</li>
                <li><strong>T (Table):</strong> Turn right and stop at table - P(T) = 0.3</li>
            </ul>
            
            <p><strong>Joystick behavior patterns:</strong></p>
            <ul>
                <li>When intending door: points straight 30% of time</li>
                <li>When intending straight: points straight 40% of time</li>
                <li>When intending table: points straight 5% of time</li>
            </ul>
            
            <p><strong>Research Question:</strong> If user points joystick straight, what's their most likely destination?</p>
        </div>
        
        <div class="bayes-calculator">
            <h3>🧮 Interactive Bayes Calculator</h3>
            <p>Use this calculator to explore the wheelchair navigation example or input your own Bayes' rule problems!</p>
            
            <div class="calc-input-group">
                <h4>Prior Probabilities</h4>
                <p>P(Door): <input type="number" id="priorD" class="calc-input" value="0.5" step="0.01" min="0" max="1"></p>
                <p>P(Straight): <input type="number" id="priorS" class="calc-input" value="0.2" step="0.01" min="0" max="1"></p>
                <p>P(Table): <input type="number" id="priorT" class="calc-input" value="0.3" step="0.01" min="0" max="1"></p>
            </div>
            
            <div class="calc-input-group">
                <h4>Likelihood (Joystick Straight | Destination)</h4>
                <p>P(J|Door): <input type="number" id="likD" class="calc-input" value="0.3" step="0.01" min="0" max="1"></p>
                <p>P(J|Straight): <input type="number" id="likS" class="calc-input" value="0.4" step="0.01" min="0" max="1"></p>
                <p>P(J|Table): <input type="number" id="likT" class="calc-input" value="0.05" step="0.01" min="0" max="1"></p>
            </div>
            
            <button class="calc-button" onclick="calculateBayes()">Calculate Posterior Probabilities</button>
            
            <div id="bayesResult" class="calc-result">
                Click Calculate to see results
            </div>
        </div>
        
        <div class="step-sequence">
            <h3>📊 Manual Calculation Walkthrough</h3>
            
            <div class="step-item">
                <span class="step-number">1</span>
                <div class="step-content">
                    <strong>Calculate P(Door | Joystick Straight):</strong><br/>
                    Numerator: P(D) × P(J|D) = 0.5 × 0.3 = 0.15<br/>
                    Denominator: 0.5×0.3 + 0.2×0.4 + 0.3×0.05 = 0.15 + 0.08 + 0.015 = 0.245<br/>
                    P(D|J) = 0.15 / 0.245 = 0.612
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">2</span>
                <div class="step-content">
                    <strong>Calculate P(Straight | Joystick Straight):</strong><br/>
                    P(S|J) = (0.2 × 0.4) / 0.245 = 0.08 / 0.245 = 0.327
                </div>
            </div>
            
            <div class="step-item">
                <span class="step-number">3</span>
                <div class="step-content">
                    <strong>Calculate P(Table | Joystick Straight):</strong><br/>
                    P(T|J) = (0.3 × 0.05) / 0.245 = 0.015 / 0.245 = 0.061
                </div>
            </div>
        </div>
        
        <div class="highlight-confirmed">
            <h3>🎯 Most Likely Destination: Door (61.2%)</h3>
            <p><em>Despite straight joystick pointing, the user is most likely headed to the door!</em></p>
        </div>
        
        <div class="comparison-grid">
            <div class="comparison-item medical">
                <h4>🏥 Medical Applications</h4>
                <p><strong>Disease diagnosis:</strong> P(Disease | Symptoms)</p>
                <p><strong>Drug efficacy:</strong> P(Recovery | Treatment)</p>
                <p><strong>Medical imaging:</strong> P(Cancer | Scan Result)</p>
                <p><em>Bayes' rule is essential for evidence-based medicine</em></p>
            </div>
            
            <div class="comparison-item security">
                <h4>🛡️ Security & Detection</h4>
                <p><strong>Fraud detection:</strong> P(Fraud | Transaction Pattern)</p>
                <p><strong>Spam filtering:</strong> P(Spam | Email Features)</p>
                <p><strong>Threat assessment:</strong> P(Threat | Surveillance Data)</p>
                <p><em>Critical for automated security systems</em></p>
            </div>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🎯 When Do We Use Bayes' Rule?</h2>
        
        <div class="highlight-insight">
            <h4>💡 Perfect Scenarios for Bayes' Rule</h4>
            <ol>
                <li><strong>Diagnostic problems:</strong> Symptoms → Disease probability</li>
                <li><strong>Classification tasks:</strong> Features → Category probability</li>
                <li><strong>Updating beliefs:</strong> New evidence → Revised probability</li>
                <li><strong>Reversing conditionals:</strong> P(A|B) known, want P(B|A)</li>
                <li><strong>Multiple hypotheses:</strong> Which explanation is most likely?</li>
            </ol>
        </div>
        
        <div class="sub-section">
            <h3>The Bayesian Mindset</h3>
            <p><strong>Traditional approach:</strong> "What does this evidence tell us?"<br/>
            <strong>Bayesian approach:</strong> "How should this evidence change our beliefs?"</p>
            
            <p>Bayes' rule provides a mathematically rigorous way to:</p>
            <ul>
                <li>Combine prior knowledge with new evidence</li>
                <li>Update probabilities as information arrives</li>
                <li>Make optimal decisions under uncertainty</li>
                <li>Account for the rarity or commonality of events</li>
            </ul>
        </div>
        
        <div class="highlight-warning">
            <h4>⚠️ Common Misconceptions</h4>
            <ul>
                <li><strong>Base rate neglect:</strong> Ignoring how common/rare the condition is</li>
                <li><strong>Confusion of conditionals:</strong> Mixing up P(A|B) and P(B|A)</li>
                <li><strong>Overconfidence in evidence:</strong> Forgetting that tests can be wrong</li>
                <li><strong>Ignoring alternative explanations:</strong> Not considering all possible causes</li>
            </ul>
            <p><em>These are exactly the intuition traps that make Bayes' rule so valuable!</em></p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>🧮 Computational Perspective</h2>
        
        <div class="sub-section">
            <h3>Why Bayes' Rule Powers Modern AI</h3>
            <p>Bayes' rule isn't just a historical curiosity – it's the foundation of modern machine learning and artificial intelligence:</p>
            
            <ul>
                <li><strong>Naive Bayes classifiers:</strong> Email spam detection, sentiment analysis</li>
                <li><strong>Bayesian networks:</strong> Medical diagnosis systems, risk assessment</li>
                <li><strong>Bayesian optimization:</strong> Tuning machine learning models</li>
                <li><strong>Probabilistic programming:</strong> Uncertainty quantification in predictions</li>
                <li><strong>A/B testing:</strong> Determining statistical significance in experiments</li>
            </ul>
        </div>
        
        <div class="highlight-insight">
            <h4>🤖 Real AI Applications</h4>
            <p><strong>Natural Language Processing:</strong> P(Meaning | Words)<br/>
            <strong>Computer Vision:</strong> P(Object | Image Features)<br/>
            <strong>Recommendation Systems:</strong> P(User Likes Item | Past Behavior)<br/>
            <strong>Autonomous Vehicles:</strong> P(Obstacle | Sensor Data)</p>
        </div>
    </div>
    
    <div class="step-card">
        <h2>✅ Key Takeaways</h2>
        
        <div class="highlight-confirmed">
            <h3>Master These Concepts:</h3>
            <ol>
                <li><strong>Formula:</strong> $P(A_i|B) = \frac{P(A_i)P(B|A_i)}{\sum P(A_j)P(B|A_j)}$</li>
                <li><strong>Purpose:</strong> Reverse conditional probabilities using prior knowledge</li>
                <li><strong>Components:</strong> Prior × Likelihood ÷ Total Evidence</li>
                <li><strong>Applications:</strong> Medical diagnosis, security systems, AI/ML</li>
                <li><strong>Tree diagrams:</strong> Visualize all possible pathways and probabilities</li>
                <li><strong>Computational thinking:</strong> Update beliefs systematically with evidence</li>
                <li><strong>Common errors:</strong> Base rate neglect and conditional confusion</li>
            </ol>
        </div>
        
        <div class="formula-display">
            <h3>Problem-Solving Checklist</h3>
            <p><strong>✓</strong> Identify what you want vs. what you know</p>
            <p><strong>✓</strong> Define mutually exclusive, exhaustive events</p>
            <p><strong>✓</strong> Calculate or identify all prior probabilities</p>
            <p><strong>✓</strong> Calculate or identify all likelihood probabilities</p>
            <p><strong>✓</strong> Apply Bayes' formula systematically</p>
            <p><strong>✓</strong> Verify results make intuitive sense</p>
            <p><strong>✓</strong> Consider implications for decision-making</p>
        </div>
        
        <div class="highlight-insight">
            <h4>🎓 You've Completed Probability Fundamentals!</h4>
            <p>Congratulations! You now understand the core concepts that power modern statistics, machine learning, and data science. From basic probability through Bayes' rule, you have the foundation to tackle complex real-world problems involving uncertainty and evidence.</p>
        </div>
    </div>

    <script>
        function calculateBayes() {
            // Get input values
            const priorD = parseFloat(document.getElementById('priorD').value) || 0;
            const priorS = parseFloat(document.getElementById('priorS').value) || 0;
            const priorT = parseFloat(document.getElementById('priorT').value) || 0;
            
            const likD = parseFloat(document.getElementById('likD').value) || 0;
            const likS = parseFloat(document.getElementById('likS').value) || 0;
            const likT = parseFloat(document.getElementById('likT').value) || 0;
            
            // Validate inputs
            if (priorD + priorS + priorT !== 1.0) {
                document.getElementById('bayesResult').innerHTML = 
                    'Warning: Prior probabilities should sum to 1.0<br/>Current sum: ' + 
                    (priorD + priorS + priorT).toFixed(3);
                return;
            }
            
            // Calculate numerators (joint probabilities)
            const jointD = priorD * likD;
            const jointS = priorS * likS;
            const jointT = priorT * likT;
            
            // Calculate total evidence P(J)
            const totalEvidence = jointD + jointS + jointT;
            
            if (totalEvidence === 0) {
                document.getElementById('bayesResult').innerHTML = 'Error: Total evidence probability is zero';
                return;
            }
            
            // Calculate posterior probabilities
            const posteriorD = jointD / totalEvidence;
            const posteriorS = jointS / totalEvidence;
            const posteriorT = jointT / totalEvidence;
            
            // Find most likely destination
            let mostLikely = 'Door';
            let maxProb = posteriorD;
            if (posteriorS > maxProb) {
                mostLikely = 'Straight';
                maxProb = posteriorS;
            }
            if (posteriorT > maxProb) {
                mostLikely = 'Table';
                maxProb = posteriorT;
            }
            
            // Display results
            document.getElementById('bayesResult').innerHTML = `
                <strong>Posterior Probabilities:</strong><br/>
                P(Door | J) = ${posteriorD.toFixed(3)} (${(posteriorD*100).toFixed(1)}%)<br/>
                P(Straight | J) = ${posteriorS.toFixed(3)} (${(posteriorS*100).toFixed(1)}%)<br/>
                P(Table | J) = ${posteriorT.toFixed(3)} (${(posteriorT*100).toFixed(1)}%)<br/>
                <br/><strong>Most Likely: ${mostLikely}</strong>
            `;
        }
        
        // Calculate default example on page load
        window.addEventListener('load', function() {
            calculateBayes();
        });
    </script>
</body>
</html>